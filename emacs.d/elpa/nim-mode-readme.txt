Large parts of this code is shamelessly stolen from python.el and
adapted to Nim

Todo:

-- Treat parameter lists separately
-- Treat pragmas inside "{." and ".}" separately
