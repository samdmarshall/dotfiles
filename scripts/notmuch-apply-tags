#!/usr/bin/env bash

export NOTMUCH_CONFIG="/Users/samantha.marshall/.config/notmuch/notmuch-config"



function apply_tags {
    _tags=$1
    _conditions=$2
    
    /usr/local/bin/notmuch tag $_tags -- $_conditions
}

# Tags that get filed under "Alerts" 
apply_tags "+Alerts +Alerts.Apple"          "from:noreply@email.apple.com"
apply_tags "+Alerts +Alerts.CircleCI"       "from:@circleci.com"
apply_tags "+Alerts +Alerts.asciinema"      "from:hello@asciinema.org"

# Tags that file under "Developer"
apply_tags "+Developer +Developer.Apple"        "from:noreply-appledev@apple.com or from:developer@insideapple.com"
apply_tags "+Developer +Developer.Github"       "from:notifications@github.com"
apply_tags "+Developer +Developer.Github"       "from:noreply@github.com or to:@noreply.github.com or cc:mentions@noreply.github.com"
apply_tags "+Developer +Developer.Radar"        "from:devbugs@apple.com or from:dts-bugmail@group.apple.com"
apply_tags "+Developer +Developer.Seed"         "from:seedsu@apple.com or from:seedx@apple.com or subject:'AppleSeed' or subject:'Seed Notice'"

# WFH/OoO
apply_tags "+WFH" "subject:WFH or subject:OOO"

# Pivotal
apply_tags "+Pivotal" "from:notifications@pivotaltracker.com"

# Jira
apply_tags "+JIRA" "from:jira-notification-1@mlb.com"

# Github
apply_tags "+Github" "from:noreply@mlbam.com and to:noreply@mlbam.com"

# Slack
apply_tags "+Slack" "from:no-reply@slack.com"

# Timecard
apply_tags "+TimeCard" "from:admin@empiresuite.com"

# Talks
apply_tags "+Events +Events.TechTalk" "subject:'Tech Talk @ BAM'"

apply_tags "+AWS" "from:@amazon.com"


# Things that don't go under "Inbox"
apply_tags "+Archive"   "tag:inbox and not date:-1month..today"
apply_tags "-inbox"     "tag:Alerts"
apply_tags "-inbox"     "tag:Developer"
apply_tags "-inbox"     "tag:Archive"
apply_tags "-inbox"     "tag:WFH"
apply_tags "-inbox"     "tag:Pivotal"
apply_tags "-inbox"     "tag:Github"
apply_tags "-inbox"     "tag:deleted"
apply_tags "-inbox"     "tag:spam"
apply_tags "-inbox"     "tag:Slack"
apply_tags "-inbox"     "tag:Accounts"
apply_tags "-inbox"     "tag:News"
apply_tags "-inbox"     "tag:TimeCard"
apply_tags "-inbox"     "tag:Events"
apply_tags "-inbox"     "tag:HR"
apply_tags "-inbox"     "tag:Elastic"
apply_tags "-inbox"     "tag:JIRA"
apply_tags "-inbox"     "tag:AWS"

# i don't want to read things that are garbage or deleted
apply_tags "-unread" "tag:deleted"
apply_tags "-unread" "tag:spam"
apply_tags "-unread" "tag:MailingList"
apply_tags "-unread" "tag:WFH"
apply_tags "-unread" "tag:Slack"
